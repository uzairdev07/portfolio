"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/extends"),r=require("three"),t=require("react"),n=require("@react-three/fiber"),a=require("./RenderTexture.cjs.js"),u=require("./shaderMaterial.cjs.js");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}require("./useFBO.cjs.js");var l=i(e),c=o(r),s=o(t);const d=u.shaderMaterial({map:null,resolution:new c.Vector2},"void main() {\n     gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n   }","uniform sampler2D map;\n   uniform vec2 resolution;\n   void main() {\n     vec2 uv = gl_FragCoord.xy / resolution.xy;\n     vec4 t = texture2D(map, uv);\n     gl_FragColor = texture2D(map, uv);\n     #include <tonemapping_fragment>\n     #include <encodings_fragment>\n   }"),p=s.forwardRef((({children:e,...r},t)=>{n.extend({PortalMaterial:d});const u=s.useRef(null),i=s.useRef(null),{size:o,events:c,viewport:p}=n.useThree();return n.useFrame((()=>{var e;let r=null==(e=u.current)?void 0:e.__r3f.parent;r&&i.current.matrix.copy(r.matrixWorld)})),s.useImperativeHandle(t,(()=>u.current)),s.createElement("portalMaterial",l.default({ref:u,resolution:[o.width*p.dpr,o.height*p.dpr],toneMapped:!1},r),s.createElement(a.RenderTexture,{attach:"map",compute:c.compute},s.createElement("group",{onPointerOver:()=>null,matrixAutoUpdate:!1,ref:i},e)))}));exports.MeshPortalMaterial=p;
